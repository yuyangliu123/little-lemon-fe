import{f as C,u as ae,o as H,j as e,a2 as V,b as g,a3 as R,a4 as te,r as l,a5 as ne,a6 as oe,a7 as ie,a8 as le,a9 as ce,aa as k,ab as L,ac as M,ad as de,q as ue,J as $,ae as me,S as pe,B as he,V as fe,af as N,ag as F,T as xe,ah as ye}from"./index-DK1BDKGD.js";import{n as je}from"./navConfig-BpbbTEl9.js";import{u as ve}from"./ModalsSystem-Du28IU22.js";import{u as ge,H as be}from"./chunk-7OLJDQMT-DLU5gO0J.js";import{B as _e}from"./chunk-UVUR7MCU-Dbi6v9Kw.js";var G=C(function(a,t){var s;const r=ae("FormLabel",a),o=H(a),{className:m,children:d,requiredIndicator:x=e.jsx(Y,{}),optionalIndicator:p=null,...h}=o,u=V(),f=(s=u?.getLabelProps(h,t))!=null?s:{ref:t,...h};return e.jsxs(g.label,{...f,className:R("chakra-form__label",o.className),__css:{display:"block",textAlign:"start",...r},children:[d,u?.isRequired?x:p]})});G.displayName="FormLabel";var Y=C(function(a,t){const s=V(),r=te();if(!s?.isRequired)return null;const o=R("chakra-form__required-indicator",a.className);return e.jsx(g.span,{...s?.getRequiredIndicatorProps(a,t),__css:r.requiredIndicator,className:o})});Y.displayName="RequiredIndicator";var J=C(function(a,t){const{spacing:s="0.5rem",spacingX:r,spacingY:o,children:m,justify:d,direction:x,align:p,className:h,shouldWrapChildren:u,...f}=a,_=l.useMemo(()=>u?l.Children.map(m,(y,j)=>e.jsx(T,{children:y},j)):m,[m,u]);return e.jsx(g.div,{ref:t,className:R("chakra-wrap",h),...f,children:e.jsx(g.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:d,alignItems:p,flexDirection:x,listStyleType:"none",gap:s,columnGap:r,rowGap:o,padding:"0"},children:_})})});J.displayName="Wrap";var T=C(function(a,t){const{className:s,...r}=a;return e.jsx(g.li,{ref:t,__css:{display:"flex",alignItems:"flex-start"},className:R("chakra-wrap__listitem",s),...r})});T.displayName="WrapItem";var U=C(function(a,t){const{children:s,placeholder:r,className:o,...m}=a;return e.jsxs(g.select,{...m,ref:t,className:R("chakra-select",o),children:[r&&e.jsx("option",{value:"",children:r}),s]})});U.displayName="SelectField";function Se(n,a){const t={},s={};for(const[r,o]of Object.entries(n))a.includes(r)?t[r]=o:s[r]=o;return[t,s]}var X=C((n,a)=>{var t;const s=ne("Select",n),{rootProps:r,placeholder:o,icon:m,color:d,height:x,h:p,minH:h,minHeight:u,iconColor:f,iconSize:_,...y}=H(n),[j,b]=Se(y,le),S=oe(b),v={width:"100%",height:"fit-content",position:"relative",color:d},q={paddingEnd:"2rem",...s.field,_focus:{zIndex:"unset",...(t=s.field)==null?void 0:t._focus}};return e.jsxs(g.div,{className:"chakra-select__wrapper",__css:v,...j,...r,children:[e.jsx(U,{ref:a,height:p??x,minH:h??u,placeholder:o,...S,__css:q,children:n.children}),e.jsx(K,{"data-disabled":ie(S.disabled),...(f||d)&&{color:f||d},__css:s.icon,..._&&{fontSize:_},children:m})]})});X.displayName="Select";var ke=n=>e.jsx("svg",{viewBox:"0 0 24 24",...n,children:e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),Ne=g("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),K=n=>{const{children:a=e.jsx(ke,{}),...t}=n,s=l.cloneElement(a,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return e.jsx(Ne,{...t,className:"chakra-select__icon-wrapper",children:l.isValidElement(a)?s:null})};K.displayName="SelectIcon";const Ce=()=>{const n=l.useMemo(()=>ce().shape(localStorage.getItem("accessToken")?{numberOfPeople:M().typeError("人數必須是數字").min(1,"至少一人").max(20,"最多20人").required("人數是必填項"),resTime:k().required("Reservation time is required"),resDate:L().typeError("請輸入有效日期").required("日期是必填項"),occasion:k().oneOf(["Birthday","Anniversary"],"必須是 Birthday 或 Anniversary").required("場合是必填項")}:{fname:k().required("First name is required"),email:k().email("請輸入有效的電子郵件地址").required("電子郵件是必填項"),numberOfPeople:M().typeError("人數必須是數字").min(1,"至少一人").max(20,"最多20人").required("人數是必填項"),resTime:k().required("Reservation time is required"),resDate:L().typeError("請輸入有效日期").required("日期是必填項"),occasion:k().oneOf(["Birthday","Anniversary"],"必須是 Birthday 或 Anniversary").required("場合是必填項")}),[]),{register:a,handleSubmit:t,watch:s,formState:{errors:r,isValid:o},setValue:m}=de({mode:"onChange",resolver:ye(n)}),{fname:d,identifier:x,availableAccessToken:p,isEmail:h,accessToken:u}=ue(),f=ge(),{closeModal:_}=ve(),y=s("fname"),j=s("email"),b=s("numberOfPeople"),S=s("resTime"),v=s("resDate"),q=s("occasion"),Q=l.useCallback(async i=>{try{await $.post("http://localhost:5000/reservation/reservation",p?{fname:d,email:x,numberOfPeople:b,resTime:S,resDate:v,occasion:q}:{fname:y,email:j,numberOfPeople:b,resTime:S,resDate:v,occasion:q})&&(f({title:"Reserve Successfully",status:"success",duration:2e3}),_())}catch(c){console.error("Error:",c)}},[p,d,x,b,S,v,q,y,j,f]),Z=me(),E=l.useRef(),P=l.useRef(),B=l.useRef();l.useEffect(()=>{const i=setTimeout(()=>{const c=[E,P,B],W=[y,j,b];c.forEach((I,z)=>{I.current&&I.current.value!==W[z]&&(I.current.value=W[z])})},100);return()=>clearTimeout(i)},[y,j,b]);const[w,D]=l.useState(),O=l.useCallback(async i=>{if(!i||isNaN(Date.parse(i))){D(!1);return}const c=await $.get(`http://localhost:5000/reservation/checkReservation?resDate=${i}`);c&&D(c.data)},[]);l.useEffect(()=>{v&&O(v)},[v,O]);const[ee,A]=l.useState("text"),se=()=>{A("date")},re=()=>{A("text")};return e.jsxs(pe,{direction:"column",marginBottom:"2",justifyContent:"center",alignItems:"center",children:[e.jsx(be,{color:"#F4CE14",children:"Reserve Now!"}),e.jsx(he,{bg:"white",padding:10,rounded:"md",height:"auto",minW:{base:"90%",md:"468px"},fontSize:{base:"1.5em",[je.showNavSize]:"2em"},children:e.jsx("form",{onSubmit:t(Q),children:e.jsxs(fe,{spacing:4,align:"flex-start",children:[!h&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx(F,{name:"fname",ref:E,...a("fname"),placeholder:"First Name"}),r.fname&&e.jsx("p",{children:r.fname.message})]}),e.jsxs(N,{children:[e.jsx(F,{name:"email",ref:P,...a("email"),placeholder:"Email"}),r.email&&e.jsx("p",{children:r.email.message})]})]}),e.jsxs(N,{children:[e.jsx(F,{type:"number",name:"numberOfPeople",ref:B,...a("numberOfPeople"),placeholder:"Number of People"}),r.numberOfPeople&&e.jsx("p",{children:r.numberOfPeople.message})]}),e.jsxs(N,{children:[e.jsx(F,{type:ee,name:"resDate",...a("resDate"),placeholder:"Choose Date",onFocus:se,onBlur:i=>{re()}}),r.resDate&&e.jsx("p",{children:r.resDate.message})]}),e.jsxs(N,{children:[w?e.jsx(J,{width:"100%",justify:"space-around",children:w.map(({time:i,isOrder:c})=>e.jsxs(T,{children:[e.jsx(F,{type:"radio",id:i,name:"resTime",disabled:!c,display:"none",...a("resTime"),value:i}),e.jsx(G,{width:"100%",htmlFor:i,style:{background:c?"#F4CE14":"#eee",cursor:c?"pointer":"not-allowed",borderRadius:"10px",textAlign:"center",margin:0,border:document.getElementById(i)?.checked?"2px solid #495E57":"none"},children:i})]},i))}):null,r.resTime&&e.jsx("span",{children:"This field is required"})]}),e.jsxs(N,{children:[e.jsxs(X,{id:"occasion",...a("occasion",{required:!0}),children:[e.jsx("option",{value:"",children:"--Occasion--"}),e.jsx("option",{value:"Birthday",children:"Birthday"}),e.jsx("option",{value:"Anniversary",children:"Anniversary"})]}),r.occasion&&e.jsx("span",{children:"This field is required"})]}),Z?e.jsx(xe,{textStyle:"StyledText",fontSize:"1rem",color:"#000000",children:"Caps Lock is active!"}):null,e.jsx(_e,{type:"submit",width:"100%",backgroundColor:o&&w?"#F4CE14":"lightgrey",isDisabled:!(o&&w),children:"Order!"})]})})})]})},Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));export{Ce as B,T as W,Te as a};

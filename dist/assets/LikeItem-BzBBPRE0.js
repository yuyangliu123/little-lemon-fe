import{at as _,au as D,av as z,aw as f,ax as I,ay as F,az as U,aA as R,q,r as S,an as H,j as e,B as l,S as P,V as Q,aB as V,a0 as Y,T as M,s as A,I as N,F as W,$ as G}from"./index-DK1BDKGD.js";import{a as J}from"./index-CfJ94iWD.js";import"./index-DVxGg5Dc.js";import{B as L}from"./chunk-UVUR7MCU-Dbi6v9Kw.js";function K(u,i){var d=_(i?.client);D(u,z.Mutation);var g=f.useState({called:!1,loading:!1,client:d}),h=g[0],o=g[1],t=f.useRef({result:h,mutationId:0,isMounted:!0,client:d,mutation:u,options:i});Object.assign(t.current,{client:d,options:i,mutation:u});var C=f.useCallback(function(r){r===void 0&&(r={});var v=t.current,x=v.options,a=v.mutation,k=I(I({},x),{mutation:a}),p=r.client||t.current.client;!t.current.result.loading&&!k.ignoreResults&&t.current.isMounted&&o(t.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:p});var $=++t.current.mutationId,m=F(k,r);return p.mutate(m).then(function(n){var s,c,j=n.data,w=n.errors,b=w&&w.length>0?new U({graphQLErrors:w}):void 0,B=r.onError||((s=t.current.options)===null||s===void 0?void 0:s.onError);if(b&&B&&B(b,m),$===t.current.mutationId&&!m.ignoreResults){var T={called:!0,loading:!1,data:j,error:b,client:p};t.current.isMounted&&!R(t.current.result,T)&&o(t.current.result=T)}var y=r.onCompleted||((c=t.current.options)===null||c===void 0?void 0:c.onCompleted);return b||y?.(n.data,m),n}).catch(function(n){var s;if($===t.current.mutationId&&t.current.isMounted){var c={loading:!1,error:n,data:void 0,called:!0,client:p};R(t.current.result,c)||o(t.current.result=c)}var j=r.onError||((s=t.current.options)===null||s===void 0?void 0:s.onError);if(j)return j(n,m),{data:void 0,errors:n};throw n})},[]),E=f.useCallback(function(){if(t.current.isMounted){var r={called:!1,loading:!1,client:d};Object.assign(t.current,{mutationId:0,result:r}),o(r)}},[]);return f.useEffect(function(){return t.current.isMounted=!0,function(){t.current.isMounted=!1}},[]),[C,I({reset:E},h)]}const O=G`
mutation Updatelikelist($identifier: String!, $isEmail: Boolean, $idMeal: String, $baseAmount: Float, $state: String) {
  updatelikelist(identifier: $identifier,isEmail:$isEmail, idMeal: $idMeal, baseAmount:$baseAmount, state: $state) {
    likeItem {
      idMeal
    }
  }
}
`,rt=({initialData:u,loading:i,error:d,fetchlike:g,imageWidth:h})=>{const{identifier:o,isEmail:t}=q(),{cartItem:C,setCartItem:E}=S.useContext(H),[r,v]=S.useState(u),[x]=K(O,{onCompleted:()=>{g().then(a=>{v(a.data.likeitemlist)})}});return S.useEffect(()=>{console.log(r,"cartdata")},[r]),i?e.jsx(l,{children:"Loading..."}):d?e.jsx(l,{children:"Error Occurred"}):!r||r.length===0?e.jsx(l,{width:"100%",children:e.jsx(l,{textStyle:"StyledH2",color:"#000000",margin:"0 auto",width:"fit-content",children:"No Like Item In Your List"})}):e.jsx(P,{direction:{xxl:"row",base:"column"},width:"100%",alignItems:"flex-start",spacing:6,children:e.jsx(l,{width:"100%",display:"grid",gridTemplateColumns:{xl:"repeat(4, 1fr)",lg:"repeat(3, 1fr)",md:"repeat(2, 1fr)",base:"repeat(1, 1fr)"},gap:"10px",height:"fit-content",children:r?.map((a,k)=>e.jsxs(Q,{width:"100%",border:".063rem solid #e4e4e4",paddingBottom:"1rem",marginBottom:"3.125rem",height:"auto",_hover:{img:{opacity:.7},p:{color:"#da1a32"}},children:[e.jsxs(V,{to:`/order2/${a.strMeal}`,children:[e.jsx(Y,{src:a.strMealThumb,alt:a.strMeal,width:"auto",imgWidth:h,auto:"webp",height:"auto",objectFit:"cover"}),e.jsxs(l,{padding:"1.25rem 1rem .75rem",children:[e.jsx(M,{textStyle:"StyledText",color:"#333333",align:"center",marginBottom:"0.625rem",children:a.strMeal}),e.jsx(l,{children:e.jsxs(M,{textStyle:"StyledText",color:"#333333",align:"end",marginRight:"1rem",children:["Price: $",a.baseAmount]})})]})]}),e.jsxs(A,{justifyContent:"right",children:[e.jsx(L,{backgroundColor:"#e5e5e5",size:"md",onClick:async()=>{await x({variables:{identifier:o,isEmail:t,idMeal:a.idMeal,baseAmount:a.baseAmount,state:"addtocart"}}),await E(C+1)},children:e.jsxs(A,{justifyContent:"space-between",width:"100%",children:[e.jsx(N,{src:"/images/Basket.svg",height:"30px"}),e.jsx(M,{children:"Add to cart"})]})}),e.jsx(L,{backgroundColor:"#e5e5e5",size:"md",onClick:async()=>{await x({variables:{identifier:o,isEmail:t,idMeal:a.idMeal,baseAmount:a.baseAmount,state:"delete"}})},children:e.jsxs(A,{justifyContent:"space-between",width:"100%",children:[e.jsx(W,{icon:J}),e.jsx(M,{children:"Remove"})]})})]})]},a.idMeal))})})};export{rt as default};
